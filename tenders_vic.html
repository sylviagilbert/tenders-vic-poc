<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tenders Victoria - Demo</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* Light gray background */
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-blue-700 text-white shadow-lg py-4">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <!-- Logo for Buying for Victoria - Now using the user's provided image -->
                <img src="image_aa8a5e.png" 
                     alt="Buying for Victoria Logo" class="h-12 rounded-md">
                <h1 class="text-3xl font-bold rounded-md">
                    <a href="#" class="hover:text-blue-200">Tenders Victoria</a>
                </h1>
            </div>
            <nav>
                <ul class="flex space-x-6">
                    <li><a href="#" class="hover:text-blue-200 text-lg font-medium rounded-md">Home</a></li>
                    <li><a href="#" class="hover:text-blue-200 text-lg font-medium rounded-md">About</a></li>
                    <li><a href="#" class="hover:text-blue-200 text-lg font-medium rounded-md">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8">
        <!-- Login Section -->
        <div id="loginSection" class="bg-white p-8 rounded-lg shadow-xl mb-8 max-w-md mx-auto">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2 text-center">Login to Publish Contracts</h2>
            <form id="loginForm" class="space-y-6">
                <div>
                    <label for="username" class="block text-gray-700 text-lg font-medium mb-2">Username:</label>
                    <input type="text" id="username" name="username" required value="demoagent"
                           class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg">
                </div>
                <div>
                    <label for="password" class="block text-gray-700 text-lg font-medium mb-2">Password:</label>
                    <input type="password" id="password" name="password" required value="demopass"
                           class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg">
                </div>
                <button type="submit"
                        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-md transition duration-300 ease-in-out transform hover:scale-105 text-lg shadow-lg">
                    Login
                </button>
                <p id="loginMessage" class="text-center text-red-600 mt-4 hidden">Invalid username or password.</p>
            </form>
        </div>

        <!-- Contract Publishing Section (hidden until logged in) -->
        <div id="publishSection" class="bg-white p-8 rounded-lg shadow-xl mb-8 hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2">Publish New Contract Details</h2>
            <form id="contractForm" class="space-y-6">
                <div>
                    <label for="contractNumber" class="block text-gray-700 text-lg font-medium mb-2">Contract Number:</label>
                    <input type="text" id="contractNumber" name="contractNumber" required
                           class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg">
                </div>
                <div>
                    <label for="contractTitle" class="block text-gray-700 text-lg font-medium mb-2">Contract Title:</label>
                    <input type="text" id="contractTitle" name="contractTitle" required
                           class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg">
                </div>
                <div>
                    <label for="contractValue" class="block text-gray-700 text-lg font-medium mb-2">Contract Value (AUD):</label>
                    <input type="number" id="contractValue" name="contractValue" required min="0"
                           class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg">
                </div>
                <div>
                    <label for="supplierName" class="block text-gray-700 text-lg font-medium mb-2">Supplier Name:</label>
                    <input type="text" id="supplierName" name="supplierName" required
                           class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg">
                </div>
                <div>
                    <label for="issuingDepartment" class="block text-gray-700 text-lg font-medium mb-2">Issuing Department/Agency:</label>
                    <input type="text" id="issuingDepartment" name="issuingDepartment" required
                           class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg">
                </div>
                <div>
                    <label for="startDate" class="block text-gray-700 text-lg font-medium mb-2">Contract Start Date:</label>
                    <input type="date" id="startDate" name="startDate" required
                           class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg">
                </div>
                <div>
                    <label for="endDate" class="block text-gray-700 text-lg font-medium mb-2">Contract End Date:</label>
                    <input type="date" id="endDate" name="endDate" required
                           class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg">
                </div>
                <div>
                    <label for="contractStatus" class="block text-gray-700 text-lg font-medium mb-2">Contract Status:</label>
                    <select id="contractStatus" name="contractStatus" required
                            class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg">
                        <option value="Awarded">Awarded</option>
                        <option value="Current" selected>Current</option>
                        <option value="Closed">Closed</option>
                        <option value="Expired">Expired</option>
                    </select>
                </div>
                <div>
                    <label for="contractDescription" class="block text-gray-700 text-lg font-medium mb-2">Contract Description:</label>
                    <textarea id="contractDescription" name="contractDescription" rows="5" required
                              class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-lg resize-y"></textarea>
                </div>
                <button type="submit"
                        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-md transition duration-300 ease-in-out transform hover:scale-105 text-lg shadow-lg">
                    Publish Contract
                </button>
            </form>
        </div>

        <div class="bg-white p-8 rounded-lg shadow-xl">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2">Published Contracts</h2>
            <div id="publishedContracts" class="space-y-6">
                <!-- Contracts will be dynamically added here -->
                <p id="noContractsMessage" class="text-gray-600 text-center text-lg">No contracts published yet.</p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6 mt-8">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; 2025 Tenders Victoria. For Demo Purposes Only.</p>
        </div>
    </footer>

    <!-- Modal for contract details -->
    <div id="detailsModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center hidden z-50 p-4">
        <div class="bg-white p-8 rounded-lg shadow-2xl w-full max-w-2xl transform scale-95 transition-transform duration-300 ease-out">
            <div class="flex justify-between items-center border-b pb-3 mb-4">
                <h3 class="text-2xl font-bold text-gray-800">Contract Details</h3>
                <button id="closeModal" class="text-gray-500 hover:text-gray-800 text-3xl font-bold">&times;</button>
            </div>
            <div id="modalContent" class="text-gray-700 space-y-3 text-lg">
                <!-- Details will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Check if localStorage is available
        const isLocalStorageAvailable = typeof(Storage) !== "undefined";

        // Function to load contracts from localStorage
        function loadContracts() {
            if (isLocalStorageAvailable) {
                const contractsJson = localStorage.getItem('fakeTendersVicContracts');
                return contractsJson ? JSON.parse(contractsJson) : [];
            }
            return [];
        }

        // Function to save contracts to localStorage
        function saveContracts(contracts) {
            if (isLocalStorageAvailable) {
                localStorage.setItem('fakeTendersVicContracts', JSON.stringify(contracts));
            }
        }

        let contracts = loadContracts();
        const loginForm = document.getElementById('loginForm');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const loginMessage = document.getElementById('loginMessage');
        const loginSection = document.getElementById('loginSection');
        const publishSection = document.getElementById('publishSection');
        const contractForm = document.getElementById('contractForm');
        const publishedContractsDiv = document.getElementById('publishedContracts');
        const noContractsMessage = document.getElementById('noContractsMessage');
        const detailsModal = document.getElementById('detailsModal');
        const closeModalButton = document.getElementById('closeModal');
        const modalContent = document.getElementById('modalContent');

        // Predefined login credentials for demo
        const DEMO_USERNAME = 'demoagent';
        const DEMO_PASSWORD = 'demopass';

        // Function to display contracts
        function displayContracts() {
            publishedContractsDiv.innerHTML = ''; // Clear existing contracts
            if (contracts.length === 0) {
                noContractsMessage.classList.remove('hidden');
                publishedContractsDiv.appendChild(noContractsMessage);
            } else {
                noContractsMessage.classList.add('hidden');
                contracts.forEach((contract, index) => {
                    const contractCard = document.createElement('div');
                    contractCard.className = 'bg-gray-50 p-6 rounded-lg shadow-md border border-gray-200 hover:shadow-lg transition-all duration-200';
                    contractCard.innerHTML = `
                        <h3 class="text-2xl font-semibold text-blue-700 mb-2">${contract.title}</h3>
                        <p class="text-gray-700 mb-1"><strong class="font-medium">Contract No:</strong> ${contract.contractNumber}</p>
                        <p class="text-gray-700 mb-1"><strong class="font-medium">Value:</strong> AUD ${contract.value.toLocaleString()}</p>
                        <p class="text-gray-700 mb-1"><strong class="font-medium">Supplier:</strong> ${contract.supplier}</p>
                        <p class="text-gray-700 mb-1"><strong class="font-medium">Department:</strong> ${contract.issuingDepartment}</p>
                        <p class="text-gray-700 mb-1"><strong class="font-medium">Status:</strong> <span class="px-2 py-1 rounded-full text-xs font-semibold ${contract.status === 'Current' ? 'bg-green-200 text-green-800' : contract.status === 'Awarded' ? 'bg-purple-200 text-purple-800' : 'bg-gray-200 text-gray-800'}">${contract.status}</span></p>
                        <p class="text-gray-700 mb-4 line-clamp-2">${contract.description}</p>
                        <button data-index="${index}" class="view-details-btn bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-md text-sm transition duration-200 ease-in-out">
                            View Details
                        </button>
                    `;
                    publishedContractsDiv.appendChild(contractCard);
                });

                // Add event listeners to "View Details" buttons
                document.querySelectorAll('.view-details-btn').forEach(button => {
                    button.addEventListener('click', (event) => {
                        const index = event.target.dataset.index;
                        showContractDetails(contracts[index]);
                    });
                });
            }
        }

        // Function to show contract details in a modal
        function showContractDetails(contract) {
            modalContent.innerHTML = `
                <p><strong class="font-semibold">Contract Number:</strong> ${contract.contractNumber}</p>
                <p><strong class="font-semibold">Contract Title:</strong> ${contract.title}</p>
                <p><strong class="font-semibold">Contract Value:</strong> AUD ${contract.value.toLocaleString()}</p>
                <p><strong class="font-semibold">Supplier Name:</strong> ${contract.supplier}</p>
                <p><strong class="font-semibold">Issuing Department/Agency:</strong> ${contract.issuingDepartment}</p>
                <p><strong class="font-semibold">Contract Start Date:</strong> ${contract.startDate}</p>
                <p><strong class="font-semibold">Contract End Date:</strong> ${contract.endDate}</p>
                <p><strong class="font-semibold">Contract Status:</strong> <span class="px-2 py-1 rounded-full text-sm font-semibold ${contract.status === 'Current' ? 'bg-green-200 text-green-800' : contract.status === 'Awarded' ? 'bg-purple-200 text-purple-800' : 'bg-gray-200 text-gray-800'}">${contract.status}</span></p>
                <p><strong class="font-semibold">Description:</strong></p>
                <p class="whitespace-pre-wrap">${contract.description}</p>
                <p class="text-sm text-gray-500 mt-4">Published on: ${new Date(contract.timestamp).toLocaleString()}</p>
            `;
            detailsModal.classList.remove('hidden');
            // Animate modal entry
            setTimeout(() => {
                detailsModal.querySelector('div').classList.remove('scale-95');
                detailsModal.querySelector('div').classList.add('scale-100');
            }, 10);
        }

        // Close modal event listener
        closeModalButton.addEventListener('click', () => {
            detailsModal.querySelector('div').classList.remove('scale-100');
            detailsModal.querySelector('div').classList.add('scale-95');
            setTimeout(() => {
                detailsModal.classList.add('hidden');
            }, 300); // Wait for animation to complete
        });

        // Close modal when clicking outside
        detailsModal.addEventListener('click', (event) => {
            if (event.target === detailsModal) {
                detailsModal.querySelector('div').classList.remove('scale-100');
                detailsModal.querySelector('div').classList.add('scale-95');
                setTimeout(() => {
                    detailsModal.classList.add('hidden');
                }, 300); // Wait for animation to complete
            }
        });

        // Handle login form submission
        loginForm.addEventListener('submit', (event) => {
            event.preventDefault(); // Prevent default form submission

            const username = usernameInput.value;
            const password = passwordInput.value;

            if (username === DEMO_USERNAME && password === DEMO_PASSWORD) {
                loginSection.classList.add('hidden');
                publishSection.classList.remove('hidden');
                loginMessage.classList.add('hidden'); // Hide any previous error message
            } else {
                loginMessage.classList.remove('hidden'); // Show error message
            }
        });

        // Handle contract form submission
        contractForm.addEventListener('submit', (event) => {
            event.preventDefault(); // Prevent default form submission

            const contractNumber = document.getElementById('contractNumber').value;
            const contractTitle = document.getElementById('contractTitle').value;
            const contractValue = parseFloat(document.getElementById('contractValue').value);
            const supplierName = document.getElementById('supplierName').value;
            const issuingDepartment = document.getElementById('issuingDepartment').value;
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const contractStatus = document.getElementById('contractStatus').value;
            const contractDescription = document.getElementById('contractDescription').value;

            const newContract = {
                id: Date.now(), // Simple unique ID
                contractNumber: contractNumber,
                title: contractTitle,
                value: contractValue,
                supplier: supplierName,
                issuingDepartment: issuingDepartment,
                startDate: startDate,
                endDate: endDate,
                status: contractStatus,
                description: contractDescription,
                timestamp: new Date().toISOString()
            };

            contracts.unshift(newContract); // Add new contract to the beginning
            saveContracts(contracts);
            displayContracts();
            contractForm.reset(); // Clear the form
        });

        // Initial display of contracts when the page loads
        document.addEventListener('DOMContentLoaded', displayContracts);
    </script>
</body>
</html>
